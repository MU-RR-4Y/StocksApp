@page "/users"
@using StocksApp.Components



<PageTitle>User</PageTitle>

<h1>Users</h1>

@if (UserList is null)
{
    <div>Loading ...</div>
}
else
{
    
    <MudTable Items="UserList" Hover="true" Class="d-flex justify-end" >
        <HeaderContent  >
            <MudTh>First Name</MudTh>
            <MudTh>Last Name</MudTh>
            <MudTh>Current Portfolio Value</MudTh>
            <MudTh>Available Cash</MudTh>
            <MudTh class="d-flex justify-center">Actions</MudTh>

        </HeaderContent>
        <RowTemplate >
            <MudTd DataLabel="First Name">@context.FirstName</MudTd>
            <MudTd DataLabel="Last Name">@context.LastName</MudTd>
            <MudTd DataLabel=">Current Portfolio Value">@($"{context.userPortfolio.currentPerformance:C2}")</MudTd>
            <MudTd DataLabel=">Available Cash">@($"{context.userPortfolio.cash:C2}")</MudTd>
            <MudTd DataLabel="Actions" class="d-flex justify-space-evenly">
                <MudButton OnClick="(()=>ManageCash(context))" Variant="Variant.Filled" Size="Size.Small" Color="Color.Success">Manage Cash</MudButton>
                <MudButton OnClick="(()=>GoToPortfolio(context.Id))" Variant="Variant.Filled" Color="Color.Tertiary" Size="Size.Small">View Portfolio</MudButton>
                <MudButton  OnClick="(()=>Delete(context))" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Delete" Color="Color.Error" Size="Size.Small">Delete</MudButton>
            </MudTd>

        </RowTemplate>
    </MudTable>

    <ManageCash user="managedCashUser" visibility="isOpen" AddCash="@AddCashToUser" Withdraw="@WithdrawCash"/>
 

    <MudButton Class="mt-2" Variant="Variant.Filled" Color="Color.Secondary" Href="/users/new">Add User</MudButton>
}

@code {
    
}
