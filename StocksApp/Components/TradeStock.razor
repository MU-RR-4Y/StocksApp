
<MudPopover Open="@visibility" AnchorOrigin="Origin.CenterCenter" TransformOrigin="Origin.CenterCenter" Style="padding:16px; margin: 16px;">
    <h1 style="text-decoration-line: underline;">@($"{_direction}") @stock.shortName</h1>


        <div class="d-flex flex-column" >
                @if(_direction == "Buy")
                {
                    <MudText>Available Cash :  £@portfolio.cash</MudText>
                    <MudText>Price : @stock.regularMarketPrice</MudText>
                    <MudText>USD Cost :@($"${(numberofShares * @stock.regularMarketPrice):N2}")</MudText>
                    <MudText>FX rate : @_USDtoGBP</MudText>
                    <MudText>GBP Cost : @($"{GBPValue:C2}")</MudText>
                    @if(ErrorMessage is not null)
                       {
                        <MudText>@ErrorMessage</MudText>
                       }
                   <div class="d-flex  flex-row justify-center">
                        <MudNumericField TextChanged="@CalculateGBPValue" @bind-Value="numberofShares" T="int"></MudNumericField>
                        <MudButton OnClick="@_tradeStock" Variant="Variant.Filled" Class="ml-auto mr-n3 mb-1" Color="Color.Success">@($"{_direction}") Stock</MudButton>
                    </div>
                }
                else
                {
                    
                    <MudText>Price : @stock.regularMarketPrice</MudText>
                    <MudText>USD Value :@($"${(numberofShares * @stock.regularMarketPrice):N2}")</MudText>
                    <MudText>FX rate : @_USDtoGBP</MudText>
            <MudText>GBP Value : @($"{GBPValue:C2}") </MudText>
                    @if (ErrorMessage is not null)
                    {
                        <MudText>@ErrorMessage</MudText>
                    }
                    <div class="d-flex  flex-row justify-center">
                        <MudNumericField TextChanged="@CalculateGBPValue" @bind-Value="numberofShares" T="int"></MudNumericField>
                        <MudButton OnClick="@_tradeStock" Variant="Variant.Filled" Class="ml-auto mr-n3 mb-1" Color="Color.Error">@($"{_direction}") Stock</MudButton>
                    </div>

                }
        </div>
</MudPopover>

@code {
   
}


